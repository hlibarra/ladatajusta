---
import AdminLayout from '../../../layouts/AdminLayout.astro';
---

<AdminLayout title="Fuentes de Scraping - Admin">
  <div class="container">
    <div class="header">
      <div>
        <h1 class="page-title">Fuentes de Scraping</h1>
        <p class="page-subtitle">Gestiona las fuentes de medios para scraping automático</p>
      </div>
      <button id="btn-new-source" class="btn btn-primary">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        Nueva Fuente
      </button>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(99, 102, 241, 0.15); color: #6366f1;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Total Fuentes</div>
          <div id="stat-total" class="stat-value">-</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(34, 197, 94, 0.15); color: #22c55e;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Activas</div>
          <div id="stat-active" class="stat-value">-</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(59, 130, 246, 0.15); color: var(--accent-secondary);">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Items Scrapeados</div>
          <div id="stat-items" class="stat-value">-</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.15); color: #f59e0b;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Total Ejecuciones</div>
          <div id="stat-runs" class="stat-value">-</div>
        </div>
      </div>
    </div>

    <!-- Sources Table -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">Todas las Fuentes</h2>
        <div class="filter-tabs">
          <button class="filter-tab active" data-filter="all">Todas</button>
          <button class="filter-tab" data-filter="active">Activas</button>
          <button class="filter-tab" data-filter="inactive">Inactivas</button>
        </div>
      </div>

      <div id="loading-state" class="loading-state">
        <div class="spinner"></div>
        <p>Cargando fuentes...</p>
      </div>

      <div id="sources-table" style="display: none;">
        <table class="sources-table">
          <thead>
            <tr>
              <th>Estado</th>
              <th>Fuente</th>
              <th>Tipo</th>
              <th>URL Base</th>
              <th>Secciones</th>
              <th>Último Scraping</th>
              <th>Items</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="sources-tbody">
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="edit-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">Editar Fuente</h2>
        <button class="modal-close" id="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="source-form">
          <input type="hidden" id="source-id" />

          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Nombre *</label>
              <input type="text" id="source-name" class="form-input" required />
            </div>
            <div class="form-group">
              <label class="form-label">Slug *</label>
              <input type="text" id="source-slug" class="form-input" required />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Media Type *</label>
              <input type="text" id="source-media-type" class="form-input" required />
            </div>
            <div class="form-group">
              <label class="form-label">Tipo de Scraper</label>
              <select id="source-scraper-type" class="form-select">
                <option value="web">Web</option>
                <option value="rss">RSS</option>
                <option value="api">API</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">URL Base *</label>
            <input type="url" id="source-base-url" class="form-input" required />
          </div>

          <div class="form-group">
            <label class="form-label">Secciones a Scrapear (separadas por coma)</label>
            <input type="text" id="source-sections" class="form-input" placeholder="politica, economia, sociedad" />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Intervalo (minutos)</label>
              <input type="number" id="source-interval" class="form-input" min="1" value="60" />
            </div>
            <div class="form-group">
              <label class="form-label">Máx. Artículos por Ejecución</label>
              <input type="number" id="source-max-articles" class="form-input" min="1" value="50" />
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Path del Scraper</label>
            <input type="text" id="source-script-path" class="form-input" placeholder="scraping/medio/scraper.py" />
          </div>

          <div class="form-group">
            <label class="form-label">Prompt de IA (usa &#123;title&#125;, &#123;summary&#125;, &#123;source_section&#125;, &#123;content&#125;)</label>
            <textarea id="source-ai-prompt" class="form-textarea" rows="12" placeholder="Prompt para procesar artículos con IA..."></textarea>
            <small class="form-hint">El prompt se usa para generar resúmenes y categorizar artículos. Deja vacío para usar el prompt por defecto.</small>
          </div>

          <div class="form-group">
            <label class="form-label">Notas</label>
            <textarea id="source-notes" class="form-textarea" rows="3"></textarea>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="source-active" />
              <span>Fuente Activa</span>
            </label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="btn-cancel">Cancelar</button>
        <button type="button" class="btn btn-primary" id="btn-save">Guardar</button>
      </div>
    </div>
  </div>
</AdminLayout>

<script>
  import { authFetch } from '../../../lib/auth';

  let allSources: any[] = [];
  let currentFilter = 'all';

  async function loadStats() {
    try {
      const response = await authFetch('/api/scraping-sources/stats');
      const stats = await response.json();

      document.getElementById('stat-total')!.textContent = stats.total_sources.toLocaleString();
      document.getElementById('stat-active')!.textContent = stats.active_sources.toLocaleString();
      document.getElementById('stat-items')!.textContent = stats.total_items_scraped.toLocaleString();
      document.getElementById('stat-runs')!.textContent = stats.total_scrape_runs.toLocaleString();
    } catch (error) {
      console.error('Error loading stats:', error);
    }
  }

  async function loadSources() {
    try {
      const response = await authFetch('/api/scraping-sources');
      allSources = await response.json();

      document.getElementById('loading-state')!.style.display = 'none';
      document.getElementById('sources-table')!.style.display = 'block';

      renderSources();
    } catch (error) {
      console.error('Error loading sources:', error);
    }
  }

  function renderSources() {
    const tbody = document.getElementById('sources-tbody')!;
    tbody.innerHTML = '';

    let filtered = allSources;
    if (currentFilter === 'active') {
      filtered = allSources.filter(s => s.is_active);
    } else if (currentFilter === 'inactive') {
      filtered = allSources.filter(s => !s.is_active);
    }

    filtered.forEach(source => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>
          <button class="toggle-btn ${source.is_active ? 'active' : ''}" data-id="${source.id}" title="${source.is_active ? 'Desactivar' : 'Activar'}">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
              ${source.is_active
                ? '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>'
                : '<circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>'
              }
            </svg>
          </button>
        </td>
        <td>
          <div class="source-name">${source.name}</div>
          <div class="source-meta">${source.slug}</div>
        </td>
        <td><span class="type-badge">${source.scraper_type}</span></td>
        <td><a href="${source.base_url}" target="_blank" class="url-link">${new URL(source.base_url).hostname}</a></td>
        <td>${source.sections_to_scrape?.slice(0, 3).join(', ') || 'N/A'}${source.sections_to_scrape?.length > 3 ? '...' : ''}</td>
        <td>
          ${source.last_scraped_at
            ? `<div class="last-scrape">
                 <div>${new Date(source.last_scraped_at).toLocaleDateString('es-AR')}</div>
                 <div class="scrape-status ${source.last_scrape_status}">${source.last_scrape_status || 'N/A'}</div>
               </div>`
            : '<span class="text-muted">Nunca</span>'
          }
        </td>
        <td>${source.total_items_scraped.toLocaleString()}</td>
        <td>
          <div class="action-buttons">
            <button class="btn-icon" data-id="${source.id}" data-action="edit" title="Editar">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
            </button>
            <button class="btn-icon btn-danger" data-id="${source.id}" data-action="delete" title="Eliminar">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
              </svg>
            </button>
          </div>
        </td>
      `;
      tbody.appendChild(row);
    });

    // Add event listeners
    document.querySelectorAll('.toggle-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const id = (e.currentTarget as HTMLElement).getAttribute('data-id')!;
        toggleSource(id);
      });
    });

    document.querySelectorAll('[data-action="edit"]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const id = (e.currentTarget as HTMLElement).getAttribute('data-id')!;
        openEditModal(id);
      });
    });

    document.querySelectorAll('[data-action="delete"]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const id = (e.currentTarget as HTMLElement).getAttribute('data-id')!;
        deleteSource(id);
      });
    });
  }

  async function toggleSource(id: string) {
    try {
      await authFetch(`/api/scraping-sources/${id}/toggle`, { method: 'POST' });
      await loadSources();
      await loadStats();
    } catch (error: any) {
      alert(`Error: ${error.message}`);
    }
  }

  function openEditModal(id?: string) {
    const modal = document.getElementById('edit-modal')!;
    const title = document.getElementById('modal-title')!;
    const form = document.getElementById('source-form') as HTMLFormElement;

    form.reset();

    if (id) {
      title.textContent = 'Editar Fuente';
      const source = allSources.find(s => s.id === id);
      if (source) {
        (document.getElementById('source-id') as HTMLInputElement).value = source.id;
        (document.getElementById('source-name') as HTMLInputElement).value = source.name;
        (document.getElementById('source-slug') as HTMLInputElement).value = source.slug;
        (document.getElementById('source-media-type') as HTMLInputElement).value = source.media_type;
        (document.getElementById('source-scraper-type') as HTMLSelectElement).value = source.scraper_type;
        (document.getElementById('source-base-url') as HTMLInputElement).value = source.base_url;
        (document.getElementById('source-sections') as HTMLInputElement).value = source.sections_to_scrape?.join(', ') || '';
        (document.getElementById('source-interval') as HTMLInputElement).value = source.scraping_interval_minutes || 60;
        (document.getElementById('source-max-articles') as HTMLInputElement).value = source.max_articles_per_run || 50;
        (document.getElementById('source-script-path') as HTMLInputElement).value = source.scraper_script_path || '';
        (document.getElementById('source-ai-prompt') as HTMLTextAreaElement).value = source.ai_prompt || '';
        (document.getElementById('source-notes') as HTMLTextAreaElement).value = source.notes || '';
        (document.getElementById('source-active') as HTMLInputElement).checked = source.is_active;
      }
    } else {
      title.textContent = 'Nueva Fuente';
      (document.getElementById('source-id') as HTMLInputElement).value = '';
    }

    modal.style.display = 'flex';
  }

  async function saveSource() {
    const id = (document.getElementById('source-id') as HTMLInputElement).value;
    const data = {
      name: (document.getElementById('source-name') as HTMLInputElement).value,
      slug: (document.getElementById('source-slug') as HTMLInputElement).value,
      media_type: (document.getElementById('source-media-type') as HTMLInputElement).value,
      scraper_type: (document.getElementById('source-scraper-type') as HTMLSelectElement).value,
      base_url: (document.getElementById('source-base-url') as HTMLInputElement).value,
      sections_to_scrape: (document.getElementById('source-sections') as HTMLInputElement).value
        .split(',')
        .map(s => s.trim())
        .filter(s => s),
      scraping_interval_minutes: parseInt((document.getElementById('source-interval') as HTMLInputElement).value),
      max_articles_per_run: parseInt((document.getElementById('source-max-articles') as HTMLInputElement).value),
      scraper_script_path: (document.getElementById('source-script-path') as HTMLInputElement).value || null,
      ai_prompt: (document.getElementById('source-ai-prompt') as HTMLTextAreaElement).value || null,
      notes: (document.getElementById('source-notes') as HTMLTextAreaElement).value || null,
      is_active: (document.getElementById('source-active') as HTMLInputElement).checked,
    };

    try {
      if (id) {
        await authFetch(`/api/scraping-sources/${id}`, {
          method: 'PATCH',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
      } else {
        await authFetch('/api/scraping-sources', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
      }

      document.getElementById('edit-modal')!.style.display = 'none';
      await loadSources();
      await loadStats();
    } catch (error: any) {
      alert(`Error: ${error.message}`);
    }
  }

  async function deleteSource(id: string) {
    const source = allSources.find(s => s.id === id);
    if (!confirm(`¿Eliminar la fuente "${source?.name}"? Esta acción no se puede deshacer.`)) return;

    try {
      await authFetch(`/api/scraping-sources/${id}`, { method: 'DELETE' });
      await loadSources();
      await loadStats();
    } catch (error: any) {
      alert(`Error: ${error.message}`);
    }
  }

  // Event listeners
  document.getElementById('btn-new-source')?.addEventListener('click', () => openEditModal());
  document.getElementById('modal-close')?.addEventListener('click', () => {
    document.getElementById('edit-modal')!.style.display = 'none';
  });
  document.getElementById('btn-cancel')?.addEventListener('click', () => {
    document.getElementById('edit-modal')!.style.display = 'none';
  });
  document.getElementById('btn-save')?.addEventListener('click', saveSource);

  // Filter tabs
  document.querySelectorAll('.filter-tab').forEach(tab => {
    tab.addEventListener('click', (e) => {
      document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
      (e.currentTarget as HTMLElement).classList.add('active');
      currentFilter = (e.currentTarget as HTMLElement).getAttribute('data-filter')!;
      renderSources();
    });
  });

  // Load data
  document.addEventListener('DOMContentLoaded', () => {
    loadStats();
    loadSources();
  });
</script>

<style>
  .container {
    max-width: 1400px;
    margin: 0 auto;
  }

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 32px;
  }

  .page-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 8px 0;
  }

  .page-subtitle {
    color: var(--text-secondary);
    margin: 0;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 32px;
  }

  .stat-card {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 24px;
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-lg);
  }

  .stat-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    border-radius: var(--radius-md);
  }

  .stat-content {
    flex: 1;
  }

  .stat-label {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 4px;
  }

  .stat-value {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-primary);
  }

  .card {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-lg);
    overflow: hidden;
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 32px;
    border-bottom: 1px solid var(--border-subtle);
  }

  .card-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
  }

  .filter-tabs {
    display: flex;
    gap: 8px;
  }

  .filter-tab {
    padding: 8px 16px;
    background: none;
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .filter-tab:hover {
    background: var(--bg-secondary);
  }

  .filter-tab.active {
    background: var(--accent-secondary);
    color: white;
    border-color: var(--accent-secondary);
  }

  .loading-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 60px 20px;
    color: var(--text-muted);
  }

  .spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--border-subtle);
    border-top-color: var(--accent-secondary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 16px;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .sources-table {
    width: 100%;
    border-collapse: collapse;
  }

  .sources-table th {
    text-align: left;
    padding: 16px 24px;
    background: var(--bg-secondary);
    color: var(--text-secondary);
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .sources-table td {
    padding: 16px 24px;
    border-top: 1px solid var(--border-subtle);
  }

  .sources-table tr:hover {
    background: var(--bg-secondary);
  }

  .toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 8px;
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .toggle-btn.active {
    background: rgba(34, 197, 94, 0.1);
    color: #22c55e;
  }

  .toggle-btn:hover {
    transform: scale(1.1);
  }

  .source-name {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 2px;
  }

  .source-meta {
    font-size: 0.85rem;
    color: var(--text-muted);
  }

  .type-badge {
    display: inline-block;
    padding: 4px 10px;
    background: rgba(99, 102, 241, 0.1);
    color: #6366f1;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
  }

  .url-link {
    color: var(--accent-secondary);
    text-decoration: none;
    font-size: 0.9rem;
  }

  .url-link:hover {
    text-decoration: underline;
  }

  .last-scrape {
    font-size: 0.9rem;
  }

  .scrape-status {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-top: 4px;
  }

  .scrape-status.success {
    background: rgba(34, 197, 94, 0.1);
    color: #22c55e;
  }

  .scrape-status.error {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
  }

  .action-buttons {
    display: flex;
    gap: 8px;
  }

  .btn-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 8px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .btn-icon:hover {
    background: var(--bg-card);
    color: var(--accent-secondary);
    border-color: var(--accent-secondary);
  }

  .btn-icon.btn-danger:hover {
    color: #ef4444;
    border-color: #ef4444;
  }

  .text-muted {
    color: var(--text-muted);
  }

  /* Modal */
  .modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    padding: 20px;
  }

  .modal-content {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    max-width: 700px;
    width: 100%;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 32px;
    border-bottom: 1px solid var(--border-subtle);
  }

  .modal-header h2 {
    margin: 0;
    font-size: 1.5rem;
    color: var(--text-primary);
  }

  .modal-close {
    background: none;
    border: none;
    font-size: 2rem;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
  }

  .modal-close:hover {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
  }

  .modal-body {
    padding: 32px;
    overflow-y: auto;
    flex: 1;
  }

  .modal-footer {
    padding: 20px 32px;
    border-top: 1px solid var(--border-subtle);
    display: flex;
    justify-content: flex-end;
    gap: 12px;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
  }

  .checkbox-label input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
  }

  .form-hint {
    display: block;
    margin-top: 4px;
    font-size: 0.85rem;
    color: var(--text-muted);
  }

  @media (max-width: 768px) {
    .header {
      flex-direction: column;
      gap: 20px;
      align-items: flex-start;
    }

    .stats-grid {
      grid-template-columns: 1fr;
    }

    .card-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 16px;
    }

    .sources-table {
      font-size: 0.9rem;
    }

    .sources-table th,
    .sources-table td {
      padding: 12px 16px;
    }

    .form-row {
      grid-template-columns: 1fr;
    }
  }
</style>
